---
title: Design Details - Posting Engine Structure | Microsoft Docs
description: Posting interface and some other functions in codeunit 12 use posting engine functions to prepare and insert general ledger entry and tax entry records. The posting engine is also responsible for general ledger register creation.
author: SorenGP
ms.service: dynamics365-business-central
ms.topic: conceptual
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: ''
ms.date: 04/01/2021
ms.author: edupont
ms.openlocfilehash: 10513a64ec8286512b0112898c82afdd0f36e663
ms.sourcegitcommit: 766e2840fd16efb901d211d7fa64d96766ac99d9
ms.translationtype: HT
ms.contentlocale: en-CA
ms.lasthandoff: 03/31/2021
ms.locfileid: "5788161"
---
# <a name="design-details-posting-engine-structure"></a><span data-ttu-id="1064a-104">Design Details: Posting Engine Structure</span><span class="sxs-lookup"><span data-stu-id="1064a-104">Design Details: Posting Engine Structure</span></span>
<span data-ttu-id="1064a-105">Posting interface and some other functions in codeunit 12 use posting engine functions to prepare and insert general ledger entry and tax entry records.</span><span class="sxs-lookup"><span data-stu-id="1064a-105">Posting interface and some other functions in codeunit 12 use posting engine functions to prepare and insert general ledger entry and VAT entry records.</span></span> <span data-ttu-id="1064a-106">The posting engine is also responsible for general ledger register creation.</span><span class="sxs-lookup"><span data-stu-id="1064a-106">The posting engine is also responsible for general ledger register creation.</span></span>  
  
 <span data-ttu-id="1064a-107">The functions in the following table provide a standard framework for designing posting procedures (such as Code, CustPostApplyCustledgEntry, VendPostApplyVendLedgEntry, UnapplyCustLedgEntry, UnapplyVendLedgEntry, and Reverse) and exclusive access to table 17, G/L Entry.</span><span class="sxs-lookup"><span data-stu-id="1064a-107">The functions in the following table provide a standard framework for designing posting procedures (such as Code, CustPostApplyCustledgEntry, VendPostApplyVendLedgEntry, UnapplyCustLedgEntry, UnapplyVendLedgEntry, and Reverse) and exclusive access to table 17, G/L Entry.</span></span>  
  
|<span data-ttu-id="1064a-108">Routine</span><span class="sxs-lookup"><span data-stu-id="1064a-108">Routine</span></span>|<span data-ttu-id="1064a-109">Description</span><span class="sxs-lookup"><span data-stu-id="1064a-109">Description</span></span>|  
|-------------|---------------------------------------|  
|<span data-ttu-id="1064a-110">StartPosting</span><span class="sxs-lookup"><span data-stu-id="1064a-110">StartPosting</span></span>|<span data-ttu-id="1064a-111">Initializes posting buffer TempGLEntryBuf, locks G/L Entry and Tax Entry tables, and initializes Accounting Period, G/L Register, and Exchange Rate.</span><span class="sxs-lookup"><span data-stu-id="1064a-111">Initializes posting buffer TempGLEntryBuf, locks G/L Entry and VAT Entry tables, and initializes Accounting Period, G/L Register, and Exchange Rate.</span></span> <span data-ttu-id="1064a-112">Should be called only once, then NextEntryNo is 0.</span><span class="sxs-lookup"><span data-stu-id="1064a-112">Should be called only once, then NextEntryNo is 0.</span></span>|  
|<span data-ttu-id="1064a-113">ContinuePosting</span><span class="sxs-lookup"><span data-stu-id="1064a-113">ContinuePosting</span></span>|<span data-ttu-id="1064a-114">Checks and posts unrealized tax for previous transaction increment NextTransactionNo and prepares post of next line.</span><span class="sxs-lookup"><span data-stu-id="1064a-114">Checks and posts unrealized VAT for previous transaction increment NextTransactionNo and prepares post of next line.</span></span>|  
|<span data-ttu-id="1064a-115">FinishPosting</span><span class="sxs-lookup"><span data-stu-id="1064a-115">FinishPosting</span></span>|<span data-ttu-id="1064a-116">Completes posting by inserting G/L entries from temporary buffer into database table.</span><span class="sxs-lookup"><span data-stu-id="1064a-116">Completes posting by inserting G/L entries from temporary buffer into database table.</span></span> <span data-ttu-id="1064a-117">Always used together with StartPosting.</span><span class="sxs-lookup"><span data-stu-id="1064a-117">Always used together with StartPosting.</span></span> <span data-ttu-id="1064a-118">Checks for inconsistencies.</span><span class="sxs-lookup"><span data-stu-id="1064a-118">Checks for inconsistencies.</span></span>|  
|<span data-ttu-id="1064a-119">InitGLEntry</span><span class="sxs-lookup"><span data-stu-id="1064a-119">InitGLEntry</span></span>|<span data-ttu-id="1064a-120">Used to initialize new G/L entry for Gen.</span><span class="sxs-lookup"><span data-stu-id="1064a-120">Used to initialize new G/L entry for Gen.</span></span> <span data-ttu-id="1064a-121">Jnl Line.</span><span class="sxs-lookup"><span data-stu-id="1064a-121">Jnl Line.</span></span> <span data-ttu-id="1064a-122">Returns GLEntry as parameter.</span><span class="sxs-lookup"><span data-stu-id="1064a-122">Returns GLEntry as parameter.</span></span>|  
|<span data-ttu-id="1064a-123">InitGLEntryVAT</span><span class="sxs-lookup"><span data-stu-id="1064a-123">InitGLEntryVAT</span></span>|<span data-ttu-id="1064a-124">Same as InitGLEntry, but also assigns Bal. Account No. and SummarizeVAT.</span><span class="sxs-lookup"><span data-stu-id="1064a-124">Same as InitGLEntry, but also assigns Bal. Account No. and SummarizeVAT.</span></span>|  
|<span data-ttu-id="1064a-125">InitGLEntryVATCopy</span><span class="sxs-lookup"><span data-stu-id="1064a-125">InitGLEntryVATCopy</span></span>|<span data-ttu-id="1064a-126">Similar to InitGLEntryTax, but also copies posting groups data from Tax Entry before SummarizeTax.</span><span class="sxs-lookup"><span data-stu-id="1064a-126">Similar to InitGLEntryVAT, but also copies posting groups data from VAT Entry before SummarizeVAT.</span></span>|  
|<span data-ttu-id="1064a-127">InsertGLEntry</span><span class="sxs-lookup"><span data-stu-id="1064a-127">InsertGLEntry</span></span>|<span data-ttu-id="1064a-128">The only function that inserts G/L entry into global TempGLEntryBuf table.</span><span class="sxs-lookup"><span data-stu-id="1064a-128">The only function that inserts G/L entry into global TempGLEntryBuf table.</span></span> <span data-ttu-id="1064a-129">Always use this function for insert.</span><span class="sxs-lookup"><span data-stu-id="1064a-129">Always use this function for insert.</span></span>|  
|<span data-ttu-id="1064a-130">CreateGLEntry</span><span class="sxs-lookup"><span data-stu-id="1064a-130">CreateGLEntry</span></span>|<span data-ttu-id="1064a-131">Performs an InitGLEntry, assigns Additional Currency Amount, and then performs InsertGLEntry.</span><span class="sxs-lookup"><span data-stu-id="1064a-131">Performs an InitGLEntry, assigns Additional Currency Amount, and then performs InsertGLEntry.</span></span> <span data-ttu-id="1064a-132">Replaces several lines of code with a single function call.</span><span class="sxs-lookup"><span data-stu-id="1064a-132">Replaces several lines of code with a single function call.</span></span>|  
|<span data-ttu-id="1064a-133">CreateGLEntryBalAcc</span><span class="sxs-lookup"><span data-stu-id="1064a-133">CreateGLEntryBalAcc</span></span>|<span data-ttu-id="1064a-134">Same as CreateGLEntry, but also assigns Bal. Account Type and Bal. Account No.</span><span class="sxs-lookup"><span data-stu-id="1064a-134">Same as CreateGLEntry, but also assigns Bal. Account Type and Bal. Account No.</span></span>|  
|<span data-ttu-id="1064a-135">CreateGLEntryVAT</span><span class="sxs-lookup"><span data-stu-id="1064a-135">CreateGLEntryVAT</span></span>|<span data-ttu-id="1064a-136">Same as CreateGLEntry, but with additional processing for posting groups and saving to temporary Tax buffer:</span><span class="sxs-lookup"><span data-stu-id="1064a-136">Same as CreateGLEntry, but with additional processing for posting groups and saving to temporary VAT buffer:</span></span><br /><br /> `GLEntry.CopyPostingGroupsFromDtldCVBuf(DtldCVLedgEntryBuf,GenJnlLine."Gen. Posting Type");`<br /><br /> `InsertVATEntriesFromTemp(DtldCVLedgEntryBuf,GLEntry);`|  
|<span data-ttu-id="1064a-137">CreateGLEntryVATCollectAdj</span><span class="sxs-lookup"><span data-stu-id="1064a-137">CreateGLEntryVATCollectAdj</span></span>|<span data-ttu-id="1064a-138">Same as CreateGLEntry, but with additional collection of adjustments and saving to temporary Tax buffer:</span><span class="sxs-lookup"><span data-stu-id="1064a-138">Same as CreateGLEntry, but with additional collection of adjustments and saving to temporary VAT buffer:</span></span><br /><br /> `CollectAdjustment(AdjAmount,GLEntry.Amount,GLEntry."Additional-Currency Amount",OriginalDateSet);`<br /><br /> `InsertVATEntriesFromTemp(DtldCVLedgEntryBuf,GLEntry);`|  
|<span data-ttu-id="1064a-139">CreateGLEntryFromVATEntry</span><span class="sxs-lookup"><span data-stu-id="1064a-139">CreateGLEntryFromVATEntry</span></span>|<span data-ttu-id="1064a-140">Same as CreateGLEntry, but also copies posting groups from Tax entry.</span><span class="sxs-lookup"><span data-stu-id="1064a-140">Same as CreateGLEntry, but also copies posting groups from VAT entry.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="1064a-141">See Also</span><span class="sxs-lookup"><span data-stu-id="1064a-141">See Also</span></span>  
 [<span data-ttu-id="1064a-142">Design Details: Posting Interface Structure</span><span class="sxs-lookup"><span data-stu-id="1064a-142">Design Details: Posting Interface Structure</span></span>](design-details-posting-interface-structure.md)

[!INCLUDE[footer-include](includes/footer-banner.md)]